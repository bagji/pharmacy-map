<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <title>전국 약국 지도</title>
  <style>
    body {
      font-family: sans-serif;
      margin: 0;
      padding: 0;
    }
    h2 {
      text-align: center;
      margin: 15px 0;
    }
    #map {
      width: 100%;
      height: 90vh;
    }
  </style>
  <!-- ✅ 네이버 지도 JS API (아래에 본인 Client ID 입력) -->
  <script src="https://openapi.map.naver.com/openapi/v3/maps.js?ncpClientId=a082by5b3w"></script>
</head>
<body>
  <h2>전국 약국 지도</h2>
  <div id="map"></div>

  <script>
    // 지도 기본 설정
    const map = new naver.maps.Map('map', {
      center: new naver.maps.LatLng(36.5, 127.9), // 대한민국 중심 근처
      zoom: 7
    });

    // 약국 데이터 (실제 운영 시 Google Sheets나 DB에서 불러올 수 있음)
    const pharmacies = [
      { name: "미양온누리약국(서울강북)", address: "서울특별시 강북구 솔샘로 229-1" },
      { name: "혁신제일약국(경남진주)", address: "경남 진주시 사들로 97" },
      { name: "서울약국(대구북구)", address: "대구광역시 북구 학정로 436 1층" },
    ];

    // 주소 → 좌표 변환 후 지도에 마커 표시
    pharmacies.forEach(pharmacy => {
      naver.maps.Service.geocode({ query: pharmacy.address }, (status, response) => {
        if (status !== naver.maps.Service.Status.OK) return;
        const result = response.v2.addresses[0];
        const position = new naver.maps.LatLng(result.y, result.x);

        // 마커 생성
        const marker = new naver.maps.Marker({
          map: map,
          position: position,
          title: pharmacy.name
        });

        // 클릭 시 정보창
        const info = new naver.maps.InfoWindow({
          content: `
            <div style="padding:10px;min-width:200px;">
              <b>${pharmacy.name}</b><br>
              ${pharmacy.address}
            </div>`
        });

        naver.maps.Event.addListener(marker, "click", () => {
          info.open(map, marker);
        });
      });
    });
  </script>
</body>
</html>
